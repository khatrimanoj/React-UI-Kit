{"ast":null,"code":"import _toConsumableArray from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/mindbox/Documents/manoj/nexus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";/* eslint-disable react/no-unused-prop-types */ // we disable propTypes usage checking as we use getProp function\nimport React,{Component}from'react';import throttle from'lodash/throttle';import isNil from'lodash/isNil';import has from'lodash/has';import concat from'lodash/concat';import times from'lodash/times';import classnames from'classnames';import config from'./Config';import CarouselItem from'./CarouselItem';import Dots from'./CarouselDots';import'./Carousel.css';import'./Arrows.css';var Carousel=/*#__PURE__*/function(_Component){_inherits(Carousel,_Component);function Carousel(_props){var _this;_classCallCheck(this,Carousel);_this=_possibleConstructorReturn(this,_getPrototypeOf(Carousel).call(this,_props));_this.getCurrentValue=function(){return _this.props.infinite?_this.props.value:_this.clamp(_this.props.value);};_this.getNeededAdditionalClones=function(){return Math.ceil((_this.getCurrentValue()-_this.state.infiniteTransitionFrom)/_this.getChildren().length);};_this.getAdditionalClonesLeft=function(){var additionalClones=_this.getNeededAdditionalClones();return additionalClones<0?-additionalClones:0;};_this.getAdditionalClonesRight=function(){var additionalClones=_this.getNeededAdditionalClones();return additionalClones>0?additionalClones:0;};_this.getClonesLeft=function(){return config.numberOfInfiniteClones+_this.getAdditionalClonesLeft();};_this.getClonesRight=function(){return config.numberOfInfiniteClones+_this.getAdditionalClonesRight();};_this.getAdditionalClonesOffset=function(){return-_this.getChildren().length*_this.getCarouselElementWidth()*_this.getAdditionalClonesLeft();};_this.getProp=function(propName){var customProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var props=customProps||_this.props;var activeBreakpoint=null;if(props.breakpoints){var windowWidth=_this.state.windowWidth;var resolutions=Object.keys(props.breakpoints);resolutions.forEach(function(resolutionString){var resolution=parseInt(resolutionString);if(windowWidth<=resolution){if(!activeBreakpoint||activeBreakpoint>resolution){activeBreakpoint=resolution;}}});}if(activeBreakpoint){if(has(props.breakpoints[activeBreakpoint],propName)){return props.breakpoints[activeBreakpoint][propName];}}return props[propName];};_this.checkIfValueChanged=function(prevProps){var currentValue=_this.getProp('infinite')?_this.props.value:_this.clamp(_this.props.value);var prevValue=_this.getProp('infinite')?prevProps.value:_this.clamp(prevProps.value);return currentValue!==prevValue;};_this.resetInterval=function(){if(_this.interval){clearInterval(_this.interval);}var autoPlay=_this.getProp('autoPlay');if(!isNil(autoPlay)){_this.interval=setInterval(function(){if(!document.hidden&&!_this.state.isAutoPlayStopped){_this.nextSlide();}},autoPlay);}};_this.getChildren=function(){if(!_this.props.children){if(_this.props.slides){return _this.props.slides;}return[];}if(Array.isArray(_this.props.children)){return _this.props.children;}return[_this.props.children];};_this.getActiveSlideIndex=function(){return _this.getProp('infinite')?_this.getCurrentSlideIndex()+_this.getClonesLeft()*_this.getChildren().length:_this.getCurrentSlideIndex();};_this.getTargetMod=function(){var customValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var value=isNil(customValue)?_this.getCurrentValue():customValue;var length=_this.getChildren().length;var targetSlide;if(value>=0){targetSlide=value%length;}else{targetSlide=(length-Math.abs(value%length))%length;}return targetSlide;};_this.getTargetSlide=function(){if(!isNil(_this.state.infiniteTransitionFrom)){var mod=_this.getTargetMod(_this.state.infiniteTransitionFrom);var value=_this.getCurrentValue();return mod+(value-_this.state.infiniteTransitionFrom);}return _this.getTargetMod();};_this.onResize=throttle(function(){if(!_this.node){return;}var arrowLeftWidth=_this.arrowLeftNode&&_this.arrowLeftNode.offsetWidth;var arrowRightWidth=_this.arrowRightNode&&_this.arrowRightNode.offsetWidth;var width=_this.node.offsetWidth-(arrowLeftWidth||0)-(arrowRightWidth||0);_this.setState(function(){return{carouselWidth:width,windowWidth:window.innerWidth};});},config.resizeEventListenerThrottle);_this.onMouseDown=function(e,index){e.preventDefault();e.stopPropagation();var pageX=e.pageX;_this.setState(function(){return{clicked:index,dragStart:pageX};});};_this.onMouseMove=function(e){var pageX=e.pageX;if(_this.state.dragStart!==null){_this.setState(function(previousState){return{dragOffset:_this.getProp('rtl')?previousState.dragStart-pageX:pageX-previousState.dragStart};});}};_this.onTouchStart=function(e,index){var changedTouches=e.changedTouches;_this.setState(function(){return{clicked:index,dragStart:changedTouches[0].pageX};});};_this.onMouseUpTouchEnd=function(e){if(_this.state.dragStart!==null){e.preventDefault();if(_this.getProp('draggable')&&Math.abs(_this.state.dragOffset)>config.clickDragThreshold){_this.changeSlide(_this.getNearestSlideIndex());}else if(_this.getProp('clickToChange')){_this.changeSlide(_this.getProp('infinite')?_this.getCurrentValue()+_this.state.clicked-_this.getActiveSlideIndex():_this.state.clicked);}_this.setState(function(){return{clicked:null,dragOffset:0,dragStart:null,transitionEnabled:true};});}};_this.onTransitionEnd=function(){var infinite=_this.getProp('infinite');_this.setState(function(){return{transitionEnabled:!infinite,infiniteTransitionFrom:infinite?_this.getCurrentValue():null};});};_this.onMouseEnter=function(){_this.setState(function(){return{isAutoPlayStopped:true};});};_this.onMouseLeave=function(){_this.setState(function(){return{isAutoPlayStopped:false};});_this.resetInterval();};_this.simulateEvent=function(e){var touch=e.changedTouches[0];var screenX=touch.screenX,screenY=touch.screenY,clientX=touch.clientX,clientY=touch.clientY;var touchEventMap={touchstart:'mousedown',touchmove:'mousemove',touchend:'mouseup'};var simulatedEvent=new MouseEvent(touchEventMap[e.type],{bubbles:true,cancelable:true,view:window,detail:1,screenX:screenX,screenY:screenY,clientX:clientX,clientY:clientY});touch.target.dispatchEvent(simulatedEvent);};_this.clamp=function(value){var maxValue=_this.getChildren().length-1;if(value>maxValue){return maxValue;}if(value<0){return 0;}return value;};_this.changeSlide=function(value){return _this.props.onChange(_this.getProp('infinite')?value:_this.clamp(value));};_this.nextSlide=function(){return _this.changeSlide(_this.getCurrentValue()+_this.getProp('slidesPerScroll'));};_this.prevSlide=function(){return _this.changeSlide(_this.getCurrentValue()-_this.getProp('slidesPerScroll'));};_this.getNearestSlideIndex=function(){var slideIndexOffset=0;if(_this.getProp('keepDirectionWhenDragging')){if(_this.state.dragOffset>0){slideIndexOffset=-Math.ceil(_this.state.dragOffset/_this.getCarouselElementWidth());}else{slideIndexOffset=-Math.floor(_this.state.dragOffset/_this.getCarouselElementWidth());}}else{slideIndexOffset=-Math.round(_this.state.dragOffset/_this.getCarouselElementWidth());}return _this.getCurrentValue()+slideIndexOffset;};_this.getCurrentSlideIndex=function(){if(_this.getProp('infinite')){return _this.getTargetSlide();}return _this.clamp(_this.getCurrentValue());};_this.getCarouselElementWidth=function(){return _this.props.itemWidth||_this.state.carouselWidth/_this.getProp('slidesPerPage');};_this.getTransformOffset=function(){var elementWidthWithOffset=_this.getCarouselElementWidth()+_this.getProp('offset');var additionalOffset=_this.getProp('centered')?_this.state.carouselWidth/2-elementWidthWithOffset/2:0;var dragOffset=_this.getProp('draggable')?_this.state.dragOffset:0;var currentValue=_this.getActiveSlideIndex();var additionalClonesOffset=_this.getAdditionalClonesOffset();return dragOffset-currentValue*elementWidthWithOffset+additionalOffset-additionalClonesOffset;};_this.renderCarouselItems=function(){var isRTL=_this.getProp('rtl');var transformOffset=_this.getTransformOffset();var children=_this.getChildren();var numberOfClonesLeft=_this.getClonesLeft();var numberOfClonesRight=_this.getClonesRight();var trackLengthMultiplier=1+(_this.getProp('infinite')?numberOfClonesLeft+numberOfClonesRight:0);var trackWidth=_this.state.carouselWidth*children.length*trackLengthMultiplier;var animationSpeed=_this.getProp('animationSpeed');var transitionEnabled=_this.state.transitionEnabled;var draggable=_this.getProp('draggable')&&children&&children.length>1;var trackStyles={width:\"\".concat(trackWidth,\"px\"),transitionDuration:transitionEnabled?\"\".concat(animationSpeed,\"ms, \").concat(animationSpeed,\"ms\"):null};if(isRTL){trackStyles.marginRight=\"\".concat(_this.getAdditionalClonesOffset(),\"px\");trackStyles.transform=\"translateX(\".concat(-transformOffset,\"px)\");}else{trackStyles.marginLeft=\"\".concat(_this.getAdditionalClonesOffset(),\"px\");trackStyles.transform=\"translateX(\".concat(transformOffset,\"px)\");}var slides=children;if(_this.getProp('infinite')){var clonesLeft=times(numberOfClonesLeft,function(){return children;});var clonesRight=times(numberOfClonesRight,function(){return children;});slides=isRTL?concat.apply(void 0,_toConsumableArray(clonesRight).concat([children],_toConsumableArray(clonesLeft))):concat.apply(void 0,_toConsumableArray(clonesLeft).concat([children],_toConsumableArray(clonesRight)));}var isAutoPlay=_this.getProp('autoPlay');var isStopAutoPlayOnHover=_this.getProp('stopAutoPlayOnHover');var handleAutoPlayEvent=function handleAutoPlayEvent(action){return isAutoPlay&&isStopAutoPlayOnHover?action:null;};return React.createElement(\"div\",{className:\"Carousel__trackContainer\"},React.createElement(\"ul\",{className:classnames('Carousel__track',{'Carousel__track--transition':transitionEnabled,'Carousel__track--draggable':draggable}),style:trackStyles,ref:function ref(el){return _this.trackRef=el;},onMouseEnter:handleAutoPlayEvent(_this.onMouseEnter),onMouseLeave:handleAutoPlayEvent(_this.onMouseLeave)},slides.map(function(carouselItem,index){return(// eslint-disable-next-line no-undefined\n[null,undefined].includes(carouselItem)?null:React.createElement(CarouselItem,{key:index,currentSlideIndex:_this.getActiveSlideIndex(),index:index,width:_this.getCarouselElementWidth(),offset:index!==slides.length?_this.props.offset:0,onMouseDown:_this.onMouseDown,onTouchStart:_this.onTouchStart,clickable:_this.getProp('clickToChange'),isDragging:Math.abs(_this.state.dragOffset)>_this.props.minDraggableOffset,isDraggingEnabled:_this.props.draggable||_this.props.clickToChange},carouselItem));})));};_this.renderArrowWithAddedHandler=function(element,onClick,name){var disable=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;return React.createElement(\"div\",{className:classnames('Carousel__customArrows',{'Carousel__arrow--disable':disable},\"Carousel__custom-\".concat(name)),ref:function ref(el){return _this[\"\".concat(name,\"Node\")]=el;},onClick:_this.getProp('addArrowClickHandler')?onClick:null},element);};_this.renderArrowLeft=function(){var value=_this.getCurrentValue();var disabled=value<=0&&!_this.getProp('infinite');if(_this.getProp('arrowLeft')){if(!disabled){return _this.renderArrowWithAddedHandler(_this.getProp('arrowLeft'),_this.prevSlide,'arrowLeft');}var arrow=_this.getProp('arrowLeftDisabled')?_this.getProp('arrowLeftDisabled'):_this.getProp('arrowLeft');return _this.renderArrowWithAddedHandler(arrow,_this.prevSlide,'arrowLeft',disabled);}if(_this.getProp('arrows')){return React.createElement(\"button\",{className:\"Carousel__arrows Carousel__arrowLeft\",onClick:_this.prevSlide,ref:function ref(el){return _this.arrowLeftNode=el;},disabled:disabled},React.createElement(\"span\",null,\"prev\"));}return null;};_this.renderArrowRight=function(){var slides=_this.getChildren();var value=_this.getCurrentValue();var lastSlideIndex=slides.length-1;var disabled=value===lastSlideIndex&&!_this.getProp('infinite');if(_this.getProp('arrowRight')){if(!disabled){return _this.renderArrowWithAddedHandler(_this.getProp('arrowRight'),_this.nextSlide,'arrowRight');}var arrow=_this.getProp('arrowRightDisabled')?_this.getProp('arrowRightDisabled'):_this.getProp('arrowRight');return _this.renderArrowWithAddedHandler(arrow,_this.nextSlide,'arrowRight',disabled);}if(_this.getProp('arrows')){return React.createElement(\"button\",{className:\"Carousel__arrows Carousel__arrowRight\",onClick:_this.nextSlide,ref:function ref(el){return _this.arrowRightNode=el;},disabled:disabled},React.createElement(\"span\",null,\"next\"));}return null;};_this.state={carouselWidth:0,windowWidth:0,clicked:null,dragOffset:0,dragStart:null,transitionEnabled:false,infiniteTransitionFrom:_props.infinite?_props.value:null,// indicates what slide we are transitioning from (in case of infinite carousel), contains number value or null\nisAutoPlayStopped:false};_this.interval=null;return _this;}/* ========== initial handlers and positioning setup ========== */_createClass(Carousel,[{key:\"componentDidMount\",value:function componentDidMount(){// adding listener to remove transition when animation finished\nthis.trackRef&&this.trackRef.addEventListener('transitionend',this.onTransitionEnd);// adding event listeners for swipe\nif(this.node){this.node.parentElement.addEventListener('mousemove',this.onMouseMove,true);document.addEventListener('mouseup',this.onMouseUpTouchEnd,true);this.node.parentElement.addEventListener('touchstart',this.simulateEvent,true);this.node.parentElement.addEventListener('touchmove',this.simulateEvent,{passive:false});this.node.parentElement.addEventListener('touchend',this.simulateEvent,true);}// setting size of a carousel in state\nwindow.addEventListener('resize',this.onResize);this.onResize();// setting size of a carousel in state based on styling\nwindow.addEventListener('load',this.onResize);// setting autoplay interval\nthis.resetInterval();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var valueChanged=this.checkIfValueChanged(prevProps);if(this.getProp('autoPlay')!==this.getProp('autoPlay',prevProps)||valueChanged){this.resetInterval();}if(valueChanged){this.setState({transitionEnabled:true});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.trackRef&&this.trackRef.removeEventListener('transitionend',this.onTransitionEnd);if(this.node){this.node.parentElement.removeEventListener('mousemove',this.onMouseMove);document.removeEventListener('mouseup',this.onMouseUpTouchEnd);this.node.parentElement.removeEventListener('touchstart',this.simulateEvent);this.node.parentElement.removeEventListener('touchmove',this.simulateEvent);this.node.parentElement.removeEventListener('touchend',this.simulateEvent);}window.removeEventListener('resize',this.onResize);window.removeEventListener('load',this.onResize);if(this.interval){clearInterval(this.interval);}}/* ========== tools ========== */},{key:\"renderDots\",value:function renderDots(){if(this.getProp('dots')){return React.createElement(Dots,{value:this.getCurrentValue(),onChange:this.changeSlide,number:this.getChildren().length,rtl:this.getProp('rtl')});}return null;}},{key:\"render\",value:function render(){var _this2=this;var isRTL=this.getProp('rtl');return React.createElement(React.Fragment,null,React.createElement(\"div\",{className:classnames('Carousel',this.getProp('className'),isRTL?'Carousel--isRTL':''),ref:function ref(el){return _this2.node=el;}},this.renderArrowLeft(),this.renderCarouselItems(),this.renderArrowRight()),this.renderDots());}}]);return Carousel;}(Component);Carousel.defaultProps={offset:0,slidesPerPage:1,slidesPerScroll:1,animationSpeed:500,draggable:true,rtl:false,minDraggableOffset:10};export default Carousel;","map":{"version":3,"sources":["/home/mindbox/Documents/manoj/nexus/src/components/Carousel/Carousel.js"],"names":["React","Component","throttle","isNil","has","concat","times","classnames","config","CarouselItem","Dots","Carousel","props","getCurrentValue","infinite","value","clamp","getNeededAdditionalClones","Math","ceil","state","infiniteTransitionFrom","getChildren","length","getAdditionalClonesLeft","additionalClones","getAdditionalClonesRight","getClonesLeft","numberOfInfiniteClones","getClonesRight","getAdditionalClonesOffset","getCarouselElementWidth","getProp","propName","customProps","activeBreakpoint","breakpoints","windowWidth","resolutions","Object","keys","forEach","resolutionString","resolution","parseInt","checkIfValueChanged","prevProps","currentValue","prevValue","resetInterval","interval","clearInterval","autoPlay","setInterval","document","hidden","isAutoPlayStopped","nextSlide","children","slides","Array","isArray","getActiveSlideIndex","getCurrentSlideIndex","getTargetMod","customValue","targetSlide","abs","getTargetSlide","mod","onResize","node","arrowLeftWidth","arrowLeftNode","offsetWidth","arrowRightWidth","arrowRightNode","width","setState","carouselWidth","window","innerWidth","resizeEventListenerThrottle","onMouseDown","e","index","preventDefault","stopPropagation","pageX","clicked","dragStart","onMouseMove","previousState","dragOffset","onTouchStart","changedTouches","onMouseUpTouchEnd","clickDragThreshold","changeSlide","getNearestSlideIndex","transitionEnabled","onTransitionEnd","onMouseEnter","onMouseLeave","simulateEvent","touch","screenX","screenY","clientX","clientY","touchEventMap","touchstart","touchmove","touchend","simulatedEvent","MouseEvent","type","bubbles","cancelable","view","detail","target","dispatchEvent","maxValue","onChange","prevSlide","slideIndexOffset","floor","round","itemWidth","getTransformOffset","elementWidthWithOffset","additionalOffset","additionalClonesOffset","renderCarouselItems","isRTL","transformOffset","numberOfClonesLeft","numberOfClonesRight","trackLengthMultiplier","trackWidth","animationSpeed","draggable","trackStyles","transitionDuration","marginRight","transform","marginLeft","clonesLeft","clonesRight","isAutoPlay","isStopAutoPlayOnHover","handleAutoPlayEvent","action","el","trackRef","map","carouselItem","undefined","includes","offset","minDraggableOffset","clickToChange","renderArrowWithAddedHandler","element","onClick","name","disable","renderArrowLeft","disabled","arrow","renderArrowRight","lastSlideIndex","addEventListener","parentElement","passive","valueChanged","removeEventListener","renderDots","defaultProps","slidesPerPage","slidesPerScroll","rtl"],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unused-prop-types */ // we disable propTypes usage checking as we use getProp function\nimport React, { Component } from 'react';\nimport throttle from 'lodash/throttle';\nimport isNil from 'lodash/isNil';\nimport has from 'lodash/has';\nimport concat from 'lodash/concat';\nimport times from 'lodash/times';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\n\nimport config from './Config';\n\nimport CarouselItem from './CarouselItem';\nimport Dots from './CarouselDots';\nimport './Carousel.css';\nimport './Arrows.css';\n\nclass Carousel extends Component {\n  static propTypes = {\n    value: PropTypes.number,\n    onChange: PropTypes.func,\n    children: PropTypes.node,\n    slides: PropTypes.arrayOf(PropTypes.node),\n    slidesPerPage: PropTypes.number,\n    slidesPerScroll: PropTypes.number,\n    itemWidth: PropTypes.number,\n    offset: PropTypes.number,\n    arrows: PropTypes.bool,\n    arrowLeft: PropTypes.element,\n    arrowRight: PropTypes.element,\n    addArrowClickHandler: PropTypes.bool,\n    autoPlay: PropTypes.number,\n    stopAutoPlayOnHover: PropTypes.bool,\n    clickToChange: PropTypes.bool,\n    centered: PropTypes.bool,\n    infinite: PropTypes.bool,\n    rtl: PropTypes.bool,\n    draggable: PropTypes.bool,\n    keepDirectionWhenDragging: PropTypes.bool,\n    animationSpeed: PropTypes.number,\n    dots: PropTypes.bool,\n    className: PropTypes.string,\n    minDraggableOffset: PropTypes.number,\n    breakpoints: PropTypes.objectOf(PropTypes.shape({\n      slidesPerPage: PropTypes.number,\n      slidesPerScroll: PropTypes.number,\n      arrows: PropTypes.bool,\n      arrowLeft: PropTypes.element,\n      arrowRight: PropTypes.element,\n      addArrowClickHandler: PropTypes.bool,\n      autoPlay: PropTypes.number,\n      stopAutoPlayOnHover: PropTypes.bool,\n      clickToChange: PropTypes.bool,\n      centered: PropTypes.bool,\n      infinite: PropTypes.bool,\n      draggable: PropTypes.bool,\n      keepDirectionWhenDragging: PropTypes.bool,\n      animationSpeed: PropTypes.number,\n      dots: PropTypes.bool,\n      className: PropTypes.string,\n    })),\n  };\n  static defaultProps = {\n    offset: 0,\n    slidesPerPage: 1,\n    slidesPerScroll: 1,\n    animationSpeed: 500,\n    draggable: true,\n    rtl: false,\n    minDraggableOffset: 10,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      carouselWidth: 0,\n      windowWidth: 0,\n      clicked: null,\n      dragOffset: 0,\n      dragStart: null,\n      transitionEnabled: false,\n      infiniteTransitionFrom: props.infinite ? props.value : null, // indicates what slide we are transitioning from (in case of infinite carousel), contains number value or null\n      isAutoPlayStopped: false,\n    };\n    this.interval = null;\n  }\n\n  /* ========== initial handlers and positioning setup ========== */\n  componentDidMount() {\n    // adding listener to remove transition when animation finished\n    this.trackRef && this.trackRef.addEventListener('transitionend', this.onTransitionEnd);\n\n    // adding event listeners for swipe\n    if (this.node) {\n      this.node.parentElement.addEventListener('mousemove', this.onMouseMove, true);\n      document.addEventListener('mouseup', this.onMouseUpTouchEnd, true);\n      this.node.parentElement.addEventListener('touchstart', this.simulateEvent, true);\n      this.node.parentElement.addEventListener('touchmove', this.simulateEvent, { passive: false });\n      this.node.parentElement.addEventListener('touchend', this.simulateEvent, true);\n    }\n\n    // setting size of a carousel in state\n    window.addEventListener('resize', this.onResize);\n    this.onResize();\n\n    // setting size of a carousel in state based on styling\n    window.addEventListener('load', this.onResize);\n\n    // setting autoplay interval\n    this.resetInterval();\n  }\n\n  componentDidUpdate(prevProps) {\n    const valueChanged = this.checkIfValueChanged(prevProps);\n    if (this.getProp('autoPlay') !== this.getProp('autoPlay', prevProps) || valueChanged) {\n      this.resetInterval();\n    }\n\n    if (valueChanged) {\n      this.setState({\n        transitionEnabled: true,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.trackRef && this.trackRef.removeEventListener('transitionend', this.onTransitionEnd);\n\n    if (this.node) {\n      this.node.parentElement.removeEventListener('mousemove', this.onMouseMove);\n      document.removeEventListener('mouseup', this.onMouseUpTouchEnd);\n      this.node.parentElement.removeEventListener('touchstart', this.simulateEvent);\n      this.node.parentElement.removeEventListener('touchmove', this.simulateEvent);\n      this.node.parentElement.removeEventListener('touchend', this.simulateEvent);\n    }\n\n    window.removeEventListener('resize', this.onResize);\n    window.removeEventListener('load', this.onResize);\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n\n  /* ========== tools ========== */\n  getCurrentValue = () => this.props.infinite ? this.props.value : this.clamp(this.props.value);\n\n  getNeededAdditionalClones = () =>\n    Math.ceil((this.getCurrentValue() - this.state.infiniteTransitionFrom) / this.getChildren().length);\n\n  getAdditionalClonesLeft = () => {\n    const additionalClones = this.getNeededAdditionalClones();\n    return additionalClones < 0 ? -additionalClones : 0;\n  };\n  getAdditionalClonesRight = () => {\n    const additionalClones = this.getNeededAdditionalClones();\n    return additionalClones > 0 ? additionalClones : 0;\n  };\n  getClonesLeft = () => config.numberOfInfiniteClones + this.getAdditionalClonesLeft();\n  getClonesRight = () => config.numberOfInfiniteClones + this.getAdditionalClonesRight();\n\n  getAdditionalClonesOffset = () =>\n    -this.getChildren().length * this.getCarouselElementWidth() * this.getAdditionalClonesLeft();\n\n  /**\n   * Returns the value of a prop based on the current window width and breakpoints provided\n   * @param {string} propName name of the prop you want to get\n   * @param {object} customProps props object (used e.g. when you want to get prop from prevProps object instead of this.props)\n   * @return {any} props value\n   */\n  getProp = (propName, customProps = null) => {\n    const props = customProps || this.props;\n    let activeBreakpoint = null;\n    if (props.breakpoints) {\n      const windowWidth = this.state.windowWidth;\n      const resolutions = Object.keys(props.breakpoints);\n      resolutions.forEach(resolutionString => {\n        const resolution = parseInt(resolutionString);\n        if (windowWidth <= resolution) {\n          if (!activeBreakpoint || activeBreakpoint > resolution) {\n            activeBreakpoint = resolution;\n          }\n        }\n      });\n    }\n    if (activeBreakpoint) {\n      if (has(props.breakpoints[activeBreakpoint], propName)) {\n        return props.breakpoints[activeBreakpoint][propName];\n      }\n    }\n    return props[propName];\n  };\n\n  /**\n   * Check if this.props.value changed after update\n   * @param {object} prevProps\n   * @return {boolean} result\n   */\n  checkIfValueChanged = prevProps => {\n    const currentValue = this.getProp('infinite') ? this.props.value : this.clamp(this.props.value);\n    const prevValue = this.getProp('infinite') ? prevProps.value : this.clamp(prevProps.value);\n    return currentValue !== prevValue;\n  };\n\n  resetInterval = () => {\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n    const autoPlay = this.getProp('autoPlay');\n    if (!isNil(autoPlay)) {\n      this.interval = setInterval(() => {\n        if (!document.hidden && !this.state.isAutoPlayStopped) {\n          this.nextSlide();\n        }\n      }, autoPlay);\n    }\n  };\n\n  getChildren = () => {\n    if (!this.props.children) {\n      if (this.props.slides) {\n        return this.props.slides;\n      }\n      return [];\n    }\n    if (Array.isArray(this.props.children)) {\n      return this.props.children;\n    }\n    return [this.props.children];\n  };\n\n  getActiveSlideIndex = () => this.getProp('infinite')\n    ? this.getCurrentSlideIndex() + this.getClonesLeft() * this.getChildren().length\n    : this.getCurrentSlideIndex();\n\n  getTargetMod = (customValue = null) => {\n    const value = isNil(customValue) ? this.getCurrentValue() : customValue;\n    const length = this.getChildren().length;\n    let targetSlide;\n    if (value >= 0) {\n      targetSlide = value % length;\n    } else {\n      targetSlide = (length - Math.abs(value % length)) % length;\n    }\n    return targetSlide;\n  };\n\n  getTargetSlide = () => {\n    if (!isNil(this.state.infiniteTransitionFrom)) {\n      const mod = this.getTargetMod(this.state.infiniteTransitionFrom);\n      const value = this.getCurrentValue();\n\n      return mod + (value - this.state.infiniteTransitionFrom);\n    }\n    return this.getTargetMod();\n  };\n\n\n  /* event handlers */\n  /**\n   * Handler setting the carouselWidth value in state (used to set proper width of track and slides)\n   * throttled to improve performance\n   * @type {Function}\n   */\n  onResize = throttle(() => {\n    if (!this.node) {\n      return;\n    }\n\n    const arrowLeftWidth = this.arrowLeftNode && this.arrowLeftNode.offsetWidth;\n    const arrowRightWidth = this.arrowRightNode && this.arrowRightNode.offsetWidth;\n    const width = this.node.offsetWidth - (arrowLeftWidth || 0) - (arrowRightWidth || 0);\n\n    this.setState(() => ({\n      carouselWidth: width,\n      windowWidth: window.innerWidth,\n    }));\n  }, config.resizeEventListenerThrottle);\n\n  /**\n   * Function handling beginning of mouse drag by setting index of clicked item and coordinates of click in the state\n   * @param {event} e event\n   * @param {number} index of the element drag started on\n   */\n  onMouseDown = (e, index) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { pageX } = e;\n    this.setState(() => ({\n      clicked: index,\n      dragStart: pageX,\n    }));\n  };\n\n  /**\n   * Function handling mouse move if drag has started. Sets dragOffset in the state.\n   * @param {event} e event\n   */\n  onMouseMove = e => {\n    const { pageX } = e;\n    if (this.state.dragStart !== null) {\n      this.setState(previousState => ({\n        dragOffset: this.getProp('rtl') ? previousState.dragStart - pageX : pageX - previousState.dragStart,\n      }));\n    }\n  };\n\n  /**\n   * Function handling beginning of touch drag by setting index of touched item and coordinates of touch in the state\n   * @param {event} e event\n   * @param {number} index of the element drag started on\n   */\n  onTouchStart = (e, index) => {\n    const { changedTouches } = e;\n    this.setState(() => ({\n      clicked: index,\n      dragStart: changedTouches[0].pageX,\n    }));\n  };\n\n  /**\n   * Function handling end of touch or mouse drag. If drag was long it changes current slide to the nearest one,\n   * if drag was short (or it was just a click) it changes slide to the clicked (or touched) one.\n   * It resets clicked index, dragOffset and dragStart values in state.\n   * @param {event} e event\n   */\n  onMouseUpTouchEnd = e => {\n    if (this.state.dragStart !== null) {\n      e.preventDefault();\n      if (this.getProp('draggable') && Math.abs(this.state.dragOffset) > config.clickDragThreshold) {\n        this.changeSlide(this.getNearestSlideIndex());\n      } else if (this.getProp('clickToChange')) {\n        this.changeSlide(\n          this.getProp('infinite')\n            ? this.getCurrentValue() + this.state.clicked - this.getActiveSlideIndex()\n            : this.state.clicked,\n        );\n      }\n      this.setState(() => ({\n        clicked: null,\n        dragOffset: 0,\n        dragStart: null,\n        transitionEnabled: true,\n      }));\n    }\n  };\n\n  /**\n   * Handler setting transitionEnabled value in state to false after transition animation ends\n   */\n  onTransitionEnd = () => {\n    const infinite = this.getProp('infinite');\n    this.setState(() => ({\n      transitionEnabled: !infinite,\n      infiniteTransitionFrom: infinite ? this.getCurrentValue() : null,\n    }));\n  };\n\n  /**\n   * Function handling mouse hover over element\n   * Stops auto play\n   */\n  onMouseEnter = () => {\n    this.setState(() => ({\n      isAutoPlayStopped: true,\n    }));\n  };\n\n  /**\n   * Function handling mouse leaving element\n   * Resumes auto play\n   */\n  onMouseLeave = () => {\n    this.setState(() => ({\n      isAutoPlayStopped: false,\n    }));\n    this.resetInterval();\n  };\n\n  /**\n   * Simulates mouse events when touch events occur\n   * @param {event} e A touch event\n   */\n  simulateEvent = e => {\n    const touch = e.changedTouches[0];\n    const {\n      screenX,\n      screenY,\n      clientX,\n      clientY,\n    } = touch;\n    const touchEventMap = {\n      touchstart: 'mousedown',\n      touchmove: 'mousemove',\n      touchend: 'mouseup',\n    };\n    const simulatedEvent = new MouseEvent(\n      touchEventMap[e.type],\n      {\n        bubbles: true,\n        cancelable: true,\n        view: window,\n        detail: 1,\n        screenX,\n        screenY,\n        clientX,\n        clientY,\n      },\n    );\n    touch.target.dispatchEvent(simulatedEvent);\n  };\n\n\n  /* ========== control ========== */\n  /**\n   * Clamps number between 0 and last slide index.\n   * @param {number} value to be clamped\n   * @return {number} new value\n   */\n  clamp = value => {\n    const maxValue = this.getChildren().length - 1;\n    if (value > maxValue) {\n      return maxValue;\n    }\n    if (value < 0) {\n      return 0;\n    }\n    return value;\n  };\n\n  /**\n   * Clamps a provided value and triggers onChange\n   * @param {number} value desired index to change current value to\n   * @return {undefined}\n   */\n  changeSlide = value => this.props.onChange(this.getProp('infinite') ? value : this.clamp(value));\n\n  nextSlide = () => this.changeSlide(this.getCurrentValue() + this.getProp('slidesPerScroll'));\n\n  prevSlide = () => this.changeSlide(this.getCurrentValue() - this.getProp('slidesPerScroll'));\n\n\n  /* ========== positioning ========== */\n  /**\n   * Checks what slide index is the nearest to the current position (to calculate the result of dragging the slider)\n   * @return {number} index\n   */\n  getNearestSlideIndex = () => {\n    let slideIndexOffset = 0;\n    if (this.getProp('keepDirectionWhenDragging')) {\n      if (this.state.dragOffset > 0) {\n        slideIndexOffset = -Math.ceil(this.state.dragOffset / this.getCarouselElementWidth());\n      } else {\n        slideIndexOffset = -Math.floor(this.state.dragOffset / this.getCarouselElementWidth());\n      }\n    } else {\n      slideIndexOffset = -Math.round(this.state.dragOffset / this.getCarouselElementWidth());\n    }\n    return this.getCurrentValue() + slideIndexOffset;\n  };\n\n  /**\n   * Returns the current slide index (from either props or internal state)\n   * @return {number} index\n   */\n  getCurrentSlideIndex = () => {\n    if (this.getProp('infinite')) {\n      return this.getTargetSlide();\n    }\n    return this.clamp(this.getCurrentValue());\n  };\n\n  /**\n   * Calculates width of a single slide in a carousel\n   * @return {number} width of a slide in px\n   */\n  getCarouselElementWidth = () => this.props.itemWidth || this.state.carouselWidth / this.getProp('slidesPerPage');\n\n  /**\n   * Calculates offset in pixels to be applied to Track element in order to show current slide correctly (centered or aligned to the left)\n   * @return {number} offset in px\n   */\n  getTransformOffset = () => {\n    const elementWidthWithOffset = this.getCarouselElementWidth() + this.getProp('offset');\n    const additionalOffset = this.getProp('centered')\n      ? (this.state.carouselWidth / 2) - (elementWidthWithOffset / 2)\n      : 0;\n    const dragOffset = this.getProp('draggable') ? this.state.dragOffset : 0;\n    const currentValue = this.getActiveSlideIndex();\n    const additionalClonesOffset = this.getAdditionalClonesOffset();\n\n    return dragOffset - currentValue * elementWidthWithOffset + additionalOffset - additionalClonesOffset;\n  };\n\n\n  /* ========== rendering ========== */\n  renderCarouselItems = () => {\n    const isRTL = this.getProp('rtl');\n    const transformOffset = this.getTransformOffset();\n    const children = this.getChildren();\n    const numberOfClonesLeft = this.getClonesLeft();\n    const numberOfClonesRight = this.getClonesRight();\n\n    const trackLengthMultiplier = 1 + (this.getProp('infinite') ? numberOfClonesLeft + numberOfClonesRight : 0);\n    const trackWidth = this.state.carouselWidth * children.length * trackLengthMultiplier;\n    const animationSpeed = this.getProp('animationSpeed');\n    const transitionEnabled = this.state.transitionEnabled;\n    const draggable = this.getProp('draggable') && children && children.length > 1;\n\n    const trackStyles = {\n      width: `${trackWidth}px`,\n      transitionDuration: transitionEnabled ? `${animationSpeed}ms, ${animationSpeed}ms` : null,\n    };\n\n    if (isRTL) {\n      trackStyles.marginRight = `${this.getAdditionalClonesOffset()}px`;\n      trackStyles.transform = `translateX(${-transformOffset}px)`;\n    } else {\n      trackStyles.marginLeft = `${this.getAdditionalClonesOffset()}px`;\n      trackStyles.transform = `translateX(${transformOffset}px)`;\n    }\n\n    let slides = children;\n    if (this.getProp('infinite')) {\n      const clonesLeft = times(numberOfClonesLeft, () => children);\n      const clonesRight = times(numberOfClonesRight, () => children);\n      slides = isRTL\n        ? concat(...clonesRight, children, ...clonesLeft)\n        : concat(...clonesLeft, children, ...clonesRight);\n    }\n\n    const isAutoPlay = this.getProp('autoPlay');\n    const isStopAutoPlayOnHover = this.getProp('stopAutoPlayOnHover');\n    const handleAutoPlayEvent = action => (isAutoPlay && isStopAutoPlayOnHover) ? action : null;\n\n    return (\n      <div className=\"Carousel__trackContainer\">\n        <ul\n          className={classnames(\n            'Carousel__track',\n            {\n              'Carousel__track--transition': transitionEnabled,\n              'Carousel__track--draggable': draggable,\n            },\n          )}\n          style={trackStyles}\n          ref={el => this.trackRef = el}\n          onMouseEnter={handleAutoPlayEvent(this.onMouseEnter)}\n          onMouseLeave={handleAutoPlayEvent(this.onMouseLeave)}\n        >\n          {slides.map((carouselItem, index) => (\n            // eslint-disable-next-line no-undefined\n            [null, undefined].includes(carouselItem) ? null : (\n              <CarouselItem\n                key={index}\n                currentSlideIndex={this.getActiveSlideIndex()}\n                index={index}\n                width={this.getCarouselElementWidth()}\n                offset={index !== slides.length ? this.props.offset : 0}\n                onMouseDown={this.onMouseDown}\n                onTouchStart={this.onTouchStart}\n                clickable={this.getProp('clickToChange')}\n                isDragging={Math.abs(this.state.dragOffset) > this.props.minDraggableOffset}\n                isDraggingEnabled={this.props.draggable || this.props.clickToChange}\n              >\n                {carouselItem}\n              </CarouselItem>\n            )\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  /**\n   * Adds onClick handler to the arrow if possible (if it does not already have one)\n   * @param {ReactElement} element to render\n   * @param {function} onClick handler to be added to element\n   * @param {string} name of an element\n   * @param {boolean} disable info whether the arrow is disabled\n   * @return {ReactElement} element with added handler\n   */\n  renderArrowWithAddedHandler = (element, onClick, name, disable = false) => (\n    <div\n      className={\n        classnames(\n          'Carousel__customArrows',\n          {\n            'Carousel__arrow--disable': disable,\n          },\n          `Carousel__custom-${name}`,\n        )\n      }\n      ref={el => this[`${name}Node`] = el}\n      onClick={this.getProp('addArrowClickHandler') ? onClick : null}\n    >\n      {element}\n    </div>\n  );\n\n  /**\n   * Renders arrow left\n   * @return {ReactElement} element\n   */\n  renderArrowLeft = () => {\n    const value = this.getCurrentValue();\n    const disabled = value <= 0 && !this.getProp('infinite');\n\n    if (this.getProp('arrowLeft')) {\n      if (!disabled) {\n        return this.renderArrowWithAddedHandler(this.getProp('arrowLeft'), this.prevSlide, 'arrowLeft');\n      }\n      const arrow = this.getProp('arrowLeftDisabled') ? this.getProp('arrowLeftDisabled') : this.getProp('arrowLeft');\n      return this.renderArrowWithAddedHandler(arrow, this.prevSlide, 'arrowLeft', disabled);\n    }\n    if (this.getProp('arrows')) {\n      return (\n        <button\n          className=\"Carousel__arrows Carousel__arrowLeft\"\n          onClick={this.prevSlide}\n          ref={el => this.arrowLeftNode = el}\n          disabled={disabled}\n        >\n          <span>prev</span>\n        </button>\n      );\n    }\n    return null;\n  };\n\n  /**\n   * Renders arrow right\n   * @return {ReactElement} element\n   */\n  renderArrowRight = () => {\n    const slides = this.getChildren();\n    const value = this.getCurrentValue();\n    const lastSlideIndex = slides.length - 1;\n    const disabled = value === lastSlideIndex && !this.getProp('infinite');\n\n    if (this.getProp('arrowRight')) {\n      if (!disabled) {\n        return this.renderArrowWithAddedHandler(this.getProp('arrowRight'), this.nextSlide, 'arrowRight');\n      }\n      const arrow = this.getProp('arrowRightDisabled') ? this.getProp('arrowRightDisabled') : this.getProp('arrowRight');\n      return this.renderArrowWithAddedHandler(arrow, this.nextSlide, 'arrowRight', disabled);\n    }\n    if (this.getProp('arrows')) {\n      return (\n        <button\n          className=\"Carousel__arrows Carousel__arrowRight\"\n          onClick={this.nextSlide}\n          ref={el => this.arrowRightNode = el}\n          disabled={disabled}\n        >\n          <span>next</span>\n        </button>\n      );\n    }\n    return null;\n  };\n\n  renderDots() {\n    if (this.getProp('dots')) {\n      return <Dots value={this.getCurrentValue()} onChange={this.changeSlide} number={this.getChildren().length} rtl={this.getProp('rtl')} />;\n    }\n    return null;\n  }\n\n  render() {\n    const isRTL = this.getProp('rtl');\n    return (\n      <>\n        <div\n          className={classnames('Carousel', this.getProp('className'), isRTL ? 'Carousel--isRTL' : '')}\n          ref={el => this.node = el}\n        >\n          {this.renderArrowLeft()}\n          {this.renderCarouselItems()}\n          {this.renderArrowRight()}\n        </div>\n        {this.renderDots()}\n      </>\n    );\n  }\n}\n\nexport default Carousel;"]},"metadata":{},"sourceType":"module"}